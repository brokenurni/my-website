<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Mini Game Hub â€” Pro</title>
<style>
:root {
  --bg1:#0ea5e9;--bg2:#22d3ee;--surface:#ffffffee;--surface-2:#fafafacc;
  --surface-dark:#1f2937ee;--surface-2-dark:#0b1220cc;--text:#0f172a;--muted:#334155;
  --text-d:#e5e7eb;--muted-d:#cbd5e1;--accent:#10b981;--accent-2:#f59e0b;
  --radius:16px;--shadow:0 10px 24px rgba(0,0,0,.15);
}
*{box-sizing:border-box;}
html,body{height:100%;margin:0;font-family:system-ui,sans-serif;color:var(--text);background:linear-gradient(135deg,var(--bg1),var(--bg2));background-attachment:fixed;transition:0.4s}
body.dark{color:var(--text-d);background:linear-gradient(135deg,#0b1220,#1f2937);}
.app{max-width:1100px;margin:0 auto;padding:16px;}
.topbar{position:sticky;top:0;display:flex;justify-content:space-between;align-items:center;padding:12px 16px;margin:-16px -16px 16px;background:rgba(255,255,255,.18);backdrop-filter:blur(8px);z-index:20;}
body.dark .topbar{background:rgba(0,0,0,.25);}
.brand{display:flex;align-items:center;gap:10px;font-weight:700;}
.logo{width:40px;height:40px;display:grid;place-items:center;border-radius:50%;background:conic-gradient(from 210deg,var(--accent),var(--accent-2));color:white;font-weight:900;}
.actions{display:flex;gap:8px;}
.btn{border:none;border-radius:12px;padding:12px 16px;cursor:pointer;background:var(--accent);color:white;box-shadow:var(--shadow);font-weight:600;min-width:48px;min-height:48px;transition:.2s;}
.btn:active{transform:scale(.95);}
.btn.secondary{background:transparent;color:inherit;border:2px solid currentColor;box-shadow:none;}
.toolbar{display:flex;flex-wrap:wrap;gap:10px;justify-content:space-between;margin-bottom:14px;}
.chips{display:flex;gap:8px;flex-wrap:wrap;}
.chip{padding:10px 14px;border-radius:999px;background:var(--surface-2);cursor:pointer;border:1px solid #e2e8f0;}
body.dark .chip{background:var(--surface-2-dark);border-color:#334155;}
.chip.active{outline:2px solid var(--accent);}
.search{flex:1;min-width:200px;}
.search input{width:100%;padding:12px;border-radius:12px;border:1px solid #cbd5e1;background:var(--surface);}
body.dark .search input{background:var(--surface-dark);color:var(--text-d);border-color:#334155;}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px;}
.card{background:var(--surface);border-radius:var(--radius);padding:16px;box-shadow:var(--shadow);display:flex;flex-direction:column;gap:10px;transition:.2s;}
.card:hover{transform:translateY(-4px);}
body.dark .card{background:var(--surface-dark);}
.card h3{margin:0;font-size:1.1rem;}
.tag{font-size:.85rem;opacity:.8;}
.meta{display:flex;justify-content:space-between;font-size:.9rem;opacity:.9;}
.screen{display:none;}
.screen.active{display:block;}
.gamewrap{background:var(--surface);border-radius:var(--radius);padding:16px;box-shadow:var(--shadow);}
body.dark .gamewrap{background:var(--surface-dark);}
.back{margin-bottom:12px;}
canvas{display:block;margin:12px auto;background:#000;max-width:100%;height:auto;border-radius:12px;touch-action:none;}
.grid-ttt{display:grid;grid-template-columns:repeat(3,minmax(80px,100px));gap:8px;justify-content:center;margin:12px auto;}
.cell{width:100%;aspect-ratio:1/1;background:#fff;display:grid;place-items:center;border-radius:10px;font-size:2.5rem;cursor:pointer;box-shadow:0 2px 6px rgba(0,0,0,.2);transition:.2s;}
.cell:active{transform:scale(.95);}
body.dark .cell{background:#111827;}
.memory{display:grid;grid-template-columns:repeat(auto-fit,minmax(70px,1fr));gap:10px;max-width:420px;margin:auto;}
.mcard{width:100%;aspect-ratio:1/1;background:#fff;border-radius:10px;display:grid;place-items:center;font-size:1.8rem;cursor:pointer;box-shadow:0 2px 6px rgba(0,0,0,.2);transition:.2s;}
.mcard:active{transform:scale(.95);}
body.dark .mcard{background:#0f172a;}
footer{text-align:center;opacity:.8;padding:24px 8px;}
.controls{display:flex;gap:8px;justify-content:center;flex-wrap:wrap;margin:12px auto;}
.control-btn{min-width:60px;min-height:60px;font-size:1.2rem;}
</style>
</head>
<body>
<div class="app">
  <div class="topbar">
    <div class="brand"><div class="logo">GH</div> Mini Game Hub â€” Pro</div>
    <div class="actions">
      <button class="btn secondary" id="themeBtn">ðŸŒ™</button>
      <button class="btn secondary" id="soundBtn">ðŸ”Š</button>
      <button class="btn secondary" id="hapticBtn">ðŸ“³</button>
    </div>
  </div>

  <section id="home" class="screen active">
    <div class="toolbar">
      <div class="chips" id="catChips">
        <div class="chip active" data-cat="all">All</div>
        <div class="chip" data-cat="arcade">Arcade</div>
        <div class="chip" data-cat="puzzle">Puzzle</div>
      </div>
      <div class="search"><input id="search" placeholder="Search games..."></div>
    </div>
    <div class="grid" id="gameGrid"></div>
  </section>

  <section id="gameView" class="screen">
    <button class="btn secondary back" onclick="showHome()">â¬… Back</button>
    <div class="gamewrap">
      <h2 id="gameTitle">Game</h2>
      <div id="gameMeta" class="meta"></div>
      <div id="gameRoot"></div>
    </div>
  </section>

  <footer>Â© <span id="year"></span> Mini Game Hub â€¢ Local-first</footer>
</div>

<script>
// Utilities
const $ = (q, el=document)=>el.querySelector(q);
const $$ = (q, el=document)=>[...el.querySelectorAll(q)];
const store = (k,v)=>localStorage.setItem(k,JSON.stringify(v));
const load = (k,d=null)=>{try{return JSON.parse(localStorage.getItem(k))||d}catch{return d;}}

// Theme toggle
const themeBtn = $('#themeBtn');
themeBtn.onclick = ()=>{document.body.classList.toggle('dark');store('theme',document.body.classList.contains('dark'));};
if(load('theme')) document.body.classList.add('dark');

// Game hub
const gameGrid = $('#gameGrid');
const games = [
  {name:'TicTacToe',cat:'puzzle',fn:playTicTacToe},
  {name:'Snake',cat:'arcade',fn:playSnake},
  {name:'Memory',cat:'puzzle',fn:playMemory},
  {name:'Flappy',cat:'arcade',fn:playFlappy}
];
function renderGames(filter='all'){
  gameGrid.innerHTML='';
  games.filter(g=>filter==='all'||g.cat===filter).forEach(g=>{
    const card = document.createElement('div'); card.className='card';
    card.innerHTML=`<h3>${g.name}</h3><div class="tag">${g.cat}</div>`;
    card.onclick=()=>playGame(g);
    gameGrid.appendChild(card);
  });
}
renderGames();

// Categories
$$('.chip').forEach(chip=>{
  chip.onclick=()=>{
    $$('.chip').forEach(c=>c.classList.remove('active'));
    chip.classList.add('active');
    renderGames(chip.dataset.cat);
  }
});

// Show home
function showHome(){ $('#home').classList.add('active'); $('#gameView').classList.remove('active'); $('#gameRoot').innerHTML=''; }

// Play game
function playGame(g){
  $('#home').classList.remove('active');
  $('#gameView').classList.add('active');
  $('#gameTitle').textContent = g.name;
  g.fn($('#gameRoot'));
}

// --- Games ---

// TicTacToe
function playTicTacToe(root){
  root.innerHTML='<div class="grid-ttt"></div>';
  const grid = $('.grid-ttt',root);
  let board = Array(9).fill('');
  let turn='X';
  function checkWin(b){ const wins=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];return wins.find(w=>w.every(i=>b[i]===turn)); }
  function render(){
    grid.innerHTML='';
    board.forEach((v,i)=>{
      const c=document.createElement('div');c.className='cell';c.textContent=v;
      c.onclick=()=>{
        if(v) return; board[i]=turn; if(checkWin(board)){alert(turn+' wins!');board=Array(9).fill('');} turn=turn==='X'?'O':'X'; render();
      }
      grid.appendChild(c);
    });
  }
  render();
}

// Memory
function playMemory(root){
  let cards=['A','B','C','D','A','B','C','D']; cards.sort(()=>Math.random()-0.5);
  root.innerHTML='<div class="memory"></div>';
  const grid = $('.memory',root);
  let flipped=[],matched=[];
  function render(){
    grid.innerHTML='';
    cards.forEach((v,i)=>{
      const c=document.createElement('div'); c.className='mcard';
      c.textContent = matched.includes(i)||(flipped.includes(i)?v:''); 
      c.onclick = ()=>{
        if(flipped.includes(i)||matched.includes(i)) return;
        flipped.push(i); render();
        if(flipped.length===2){
          if(cards[flipped[0]]===cards[flipped[1]]) matched.push(...flipped);
          setTimeout(()=>{flipped=[]; render();},800);
        }
      }
      grid.appendChild(c);
    });
  }
  render();
}

// Snake
function playSnake(root){
  root.innerHTML='<canvas></canvas>';
  const canvas = $('canvas',root); canvas.width=300; canvas.height=300;
  const ctx = canvas.getContext('2d');
  let snake=[{x:5,y:5}],food={x:10,y:10},dir={x:1,y:0};
  function draw(){
    ctx.fillStyle='#000'; ctx.fillRect(0,0,canvas.width,canvas.height);
    ctx.fillStyle='lime'; snake.forEach(s=>ctx.fillRect(s.x*15,s.y*15,15,15));
    ctx.fillStyle='red'; ctx.fillRect(food.x*15,food.y*15,15,15);
  }
  function move(){
    const head={x:snake[0].x+dir.x, y:snake[0].y+dir.y};
    if(head.x<0||head.x>=20||head.y<0||head.y>=20||snake.some(s=>s.x===head.x&&s.y===head.y)){snake=[{x:5,y:5}]; dir={x:1,y:0};}
    else snake.unshift(head); 
    if(head.x===food.x&&head.y===food.y){food={x:Math.floor(Math.random()*20),y:Math.floor(Math.random()*20);} }
    else snake.pop();
    draw();
  }
  window.addEventListener('keydown',e=>{
    if(e.key==='ArrowUp') dir={x:0,y:-1};
    if(e.key==='ArrowDown') dir={x:0,y:1};
    if(e.key==='ArrowLeft') dir={x:-1,y:0};
    if(e.key==='ArrowRight') dir={x:1,y:0};
  });
  setInterval(move,150);
}

// Flappy
function playFlappy(root){
  root.innerHTML='<canvas></canvas>';
  const canvas = $('canvas',root); canvas.width=300; canvas.height=400;
  const ctx = canvas.getContext('2d');
  let bird={x:50,y:200,vy:0},pipes=[{x:300,y:Math.random()*200+50}];
  function draw(){
    ctx.fillStyle='#87ceeb'; ctx.fillRect(0,0,canvas.width,canvas.height);
    ctx.fillStyle='yellow'; ctx.fillRect(bird.x,bird.y,20,20);
    ctx.fillStyle='green'; pipes.forEach(p=>{ctx.fillRect(p.x,0,30,p.y); ctx.fillRect(p.x,p.y+100,30,canvas.height-p.y-100)});
  }
  function update(){
    bird.vy+=0.5; bird.y+=bird.vy;
    pipes.forEach(p=>{p.x-=2; if(p.x< -30) p.x=300;});
    pipes.forEach(p=>{if(bird.x+20>p.x&&bird.x< p.x+30&&(bird.y<p.y||bird.y>p.y+100)) bird.y=200,bird.vy=0;});
    if(bird.y>canvas.height) bird.y=200,bird.vy=0;
    draw();
  }
  canvas.onclick = ()=>{bird.vy=-8;}
  setInterval(update,20);
}

// Year
$('#year').textContent = new Date().getFullYear();
</script>
</body>
</html>
